{% extends "base_map.html" %}

{% load i18n %}

{% block stylesheet %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}styles/dashboard.css" />
{% endblock %}

{% block content %}
<ul class="breadcrumb">
    <li class="disk hover base_bgcolor">
    </li>
</ul>

<ul class="list-view">
{% for p in QU_projects %}
    {% if forloop.first %}
    <li>
        <h3 class="base_bgcolor">{% trans "Questionnaires" %}</h3>

        <ul>
    {% endif %}
            <li id="QU_{{ p.id }}" class="project">
                <h3 class="base_textcolor">{{ p.title }}</h3>
                <p>{{ p.description }}</p>
                <a href="{{ p.project_url }}">{% trans "Go to the application.." %}</a>
            </li>

    {% if forloop.last %}
        </ul>
    </li>
    {% endif %}
{% endfor %}
{% for p in IC_projects %}
    {% if forloop.first %}
    <li>
        <h3 class="base_bgcolor">{% trans "Idea competitions" %}</h3>

        <ul>
    {% endif %}
            <li id="IC_{{ p.id }}" class="project">
                <h3 class="base_textcolor">{{ p.title }}</h3>
                <p>{{ p.description }}</p>
                <a href="{{ p.project_url }}">{% trans "Go to the application.." %}</a>
            </li>

    {% if forloop.last %}
        </ul>
    </li>
    {% endif %}
{% endfor %}
{% for p in PP_projects %}
    {% if forloop.first %}
    <li>
        <h3 class="base_bgcolor">{% trans "Planning projects" %}</h3>

        <ul>
    {% endif %}
            <li id="PP_{{ p.id }}" class="project">
                <h3 class="base_textcolor">{{ p.title }}</h3>
                <p>{{ p.description }}</p>
                <a href="{{ p.project_url }}">{% trans "Go to the application.." %}</a>
            </li>

    {% if forloop.last %}
        </ul>
    </li>
    {% endif %}
{% endfor %}
</ul>

{% endblock content %}


{% block javascript %}
<script type="text/javascript" src="{{ STATIC_URL }}json/pointer_geoJSON.js"></script>
<script src="https://softgis.org.aalto.fi/OpenLayers/OpenLayers.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="{% url dashboard_js %}"></script>
<script type="text/javascript">
var city_polygon = {
    'type': 'Feature',
    'properties': {},
    'geometry': {{ city_settings.city_area.json|safe }}
    };

var projects_QU = {
    'type': 'FeatureCollection',
    'features': []
    };

var projects_IC = {
    'type': 'FeatureCollection',
    'features': []
    };

var projects_PP = {
    'type': 'FeatureCollection',
    'features': []
    };

{% for p in QU_projects %}
projects_QU.features.push(
    {
    "type": "Feature",
    "id":"QU_{{ p.id }}",
    "properties": {
        "url": "{{ p.project_url }}",
        "title": "{{ p.tooltip }}" },
    "geometry": {{ p.location.json|safe }}
    });
{% endfor %}

{% for p in IC_projects %}
projects_IC.features.push(
    {
    "type": "Feature",
    "id":"IC_{{ p.id }}",
    "properties": {
        "url": "{{ p.project_url }}",
        "title": "{{ p.tooltip }}" },
    "geometry": {{ p.location.json|safe }}
    });
{% endfor %}

{% for p in PP_projects %}
projects_PP.features.push(
    {
    "type": "Feature",
    "id":"PP_{{ p.id }}",
    "properties": {
        "url": "{{ p.project_url }}",
        "title": "{{ p.tooltip }}" },
    "geometry": {{ p.location.json|safe }}
    });
{% endfor %}

$(window).load(function() {
    init();
});
</script>
{% endblock javascript %}

